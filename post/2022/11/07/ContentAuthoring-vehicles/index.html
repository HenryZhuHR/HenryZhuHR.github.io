<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.35">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/png" sizes="32x32" href="/images/global/avatar-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/global/avatar-16x16.png"><meta name="application-name" content="Henry Zhu"><meta name="apple-mobile-web-app-title" content="Henry Zhu"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" href="/images/global/avatar.png"><meta name="theme-color" content="#377bb5"><meta name="msapplication-TileColor" content="#377bb5"><title>CARLA + Blender | Henry Zhu</title><meta name="description" content="Henry Zhu' universe.">
    <link rel="modulepreload" href="/assets/app.351d7b6c.js"><link rel="modulepreload" href="/assets/index.html.e984fb10.js"><link rel="modulepreload" href="/assets/index.html.b07507a0.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/assets/style.d121c7e5.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header ref_key="navbar" class="navbar invert"><span><a href="/" class=""><span class="site-name">$ cd /home/</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="主页/Home"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M489.2 287.9h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V146.2c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H128v-32c0-2.6-2-4.6-4.6-4.6H96c-2.6 0-4.6 2-4.6 4.6v178.3H54.8v-32c0-2.6-2-4.6-4.6-4.6H22.8c-2.6 0-4.6 2-4.6 4.6V512h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V292.5c.1-2.6-1.9-4.6-4.5-4.6zm-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64zm146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"/></svg></span><span>主页/Home</span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="文章/See"><span class="title"><!----><span>文章/See</span></span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="文章/See"><span class="title"><!----><span>文章/See</span></span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/program/git/git.md" class="" aria-label="Git (多多Commit)"><!--[--><!--]--><!----><span>Git (多多Commit)</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/program/linux/linux.md" class="" aria-label="Linux Go (不完整手册)"><!--[--><!--]--><!----><span>Linux Go (不完整手册)</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/software/raspberry/homeAssistant.md" class="" aria-label="Home Assistant (智能家居)"><!--[--><!--]--><!----><span>Home Assistant (智能家居)</span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/tags/" class="" aria-label="标签/Tags"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg></span><span>标签/Tags</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/links/" class="" aria-label="Links"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M305.45 462.59c7.391 7.298 6.188 20.097-3 25.004-77.714 41.802-176.726 29.91-242.344-35.709-65.602-65.603-77.51-164.523-35.692-242.331 4.891-9.095 17.69-10.298 25.003-3l116.812 116.813 27.394-27.394c-.688-2.61-1.594-5.001-1.594-7.814a32.004 32.004 0 1132.004 32.005c-2.797 0-5.204-.891-7.798-1.594l-27.41 27.41zm206.526-159.523a16.103 16.103 0 01-16.002 17.003H463.86a15.97 15.97 0 01-15.892-15.002C440.467 175.549 336.453 70.534 207.03 63.533a15.845 15.845 0 01-15.002-15.908V16.027A16.094 16.094 0 01209.03.024C372.255 8.62 503.475 139.841 511.976 303.067zm-96.012-.297a16.21 16.21 0 01-16.112 17.3h-32.207a16.069 16.069 0 01-15.893-14.705c-6.907-77.011-68.118-138.91-144.924-145.224a15.94 15.94 0 01-14.8-15.893v-32.114a16.134 16.134 0 0117.3-16.096c110.123 8.501 198.228 96.607 206.636 206.732z"/></svg></span><span>Links</span><!--[--><!--]--></a></div><!--]--><div class="navbar-item"><a style="cursor:pointer;"><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg></span><span>Search</span></a></div></nav><!--[--><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="主页/Home"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M489.2 287.9h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V146.2c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H128v-32c0-2.6-2-4.6-4.6-4.6H96c-2.6 0-4.6 2-4.6 4.6v178.3H54.8v-32c0-2.6-2-4.6-4.6-4.6H22.8c-2.6 0-4.6 2-4.6 4.6V512h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V292.5c.1-2.6-1.9-4.6-4.5-4.6zm-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64zm146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"/></svg></span><span>主页/Home</span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="文章/See"><span class="title"><!----><span>文章/See</span></span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="文章/See"><span class="title"><!----><span>文章/See</span></span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/program/git/git.md" class="" aria-label="Git (多多Commit)"><!--[--><!--]--><!----><span>Git (多多Commit)</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/program/linux/linux.md" class="" aria-label="Linux Go (不完整手册)"><!--[--><!--]--><!----><span>Linux Go (不完整手册)</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/software/raspberry/homeAssistant.md" class="" aria-label="Home Assistant (智能家居)"><!--[--><!--]--><!----><span>Home Assistant (智能家居)</span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/tags/" class="" aria-label="标签/Tags"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg></span><span>标签/Tags</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/links/" class="" aria-label="Links"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M305.45 462.59c7.391 7.298 6.188 20.097-3 25.004-77.714 41.802-176.726 29.91-242.344-35.709-65.602-65.603-77.51-164.523-35.692-242.331 4.891-9.095 17.69-10.298 25.003-3l116.812 116.813 27.394-27.394c-.688-2.61-1.594-5.001-1.594-7.814a32.004 32.004 0 1132.004 32.005c-2.797 0-5.204-.891-7.798-1.594l-27.41 27.41zm206.526-159.523a16.103 16.103 0 01-16.002 17.003H463.86a15.97 15.97 0 01-15.892-15.002C440.467 175.549 336.453 70.534 207.03 63.533a15.845 15.845 0 01-15.002-15.908V16.027A16.094 16.094 0 01209.03.024C372.255 8.62 503.475 139.841 511.976 303.067zm-96.012-.297a16.21 16.21 0 01-16.112 17.3h-32.207a16.069 16.069 0 01-15.893-14.705c-6.907-77.011-68.118-138.91-144.924-145.224a15.94 15.94 0 01-14.8-15.893v-32.114a16.134 16.134 0 0117.3-16.096c110.123 8.501 198.228 96.607 206.636 206.732z"/></svg></span><span>Links</span><!--[--><!--]--></a></div><!--]--><div class="navbar-item"><a style="cursor:pointer;"><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg></span><span>Search</span></a></div></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><div class="page-content"><!--[--><div class="post-wrapper show-catalog"><div class="article-header use-image post-header" style="background-image:url(/images/program/carla/carla.jpg);"><div class="article-header-mask" style="background:rgb(0,0,0, .5);"></div><div class="article-header-content"><div class="article-tags"><!--[--><span class="article-tag">Software</span><span class="article-tag">自动驾驶</span><span class="article-tag">carla</span><!--]--></div><h1 class="article-title">CARLA + Blender</h1><p class="article-subtitle">在 Blender 中建模，然后扔进 CARLA 中</p><div class="article-icons"><div class="article-icon"><svg class="ov-icon" style="font-size:1.08em;" aria-hidden="true" width="17.28" height="17.28" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"/></svg><span>HenryZhu</span></div><div class="article-icon"><svg class="ov-icon" style="font-size:1.08em;" aria-hidden="true" width="17.28" height="17.28" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M400 64h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V160h352v298c0 3.3-2.7 6-6 6z"/></svg><span>2022-11-07</span></div><div class="article-icon"><svg class="ov-icon" style="font-size:1.08em;" aria-hidden="true" width="17.28" height="17.28" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M17.618 5.968l1.453-1.453 1.414 1.414-1.453 1.453a9 9 0 11-1.414-1.414zM12 20a7 7 0 100-14 7 7 0 000 14zM11 8h2v6h-2V8zM8 1h8v2H8V1z"/></svg><span>8 min</span></div></div></div></div><main class="page post-content"><!--[--><!--]--><div class="theme-gungnir-content"><!--[--><p>CARLA在蓝图库中提供了一套开箱即用的车辆。CARLA允许用户使用定制车辆进行扩展，以获得最大的可扩展性。</p><p>详细车辆的3D建模非常复杂，需要相当程度的技能。因此，我们请读者参考关于3D建模的替代文档来源，因为这超出了本指南的范围。然而，在免费和专有的在线存储库中都有许多车辆型号来源。因此，用户有许多选项可以用来创建用于CARLA的定制车辆。 3D modelling of detailed vehicles is highly complex and requires a significant degree of skill. We therefore refer the reader to alternative sources of documentation on 3D modelling, since this is beyond the scope of this guide. There are, however, numerous sources of vehicle models in both free and proprietary online repositories. Hence the user has many options to turn to for creating custom vehicles for use in CARLA.</p><p>为CARLA准备定制车辆的关键因素在于操纵车辆电枢，然后导入虚幻发动机。安装和进口后，需要为汽车和车轮设置蓝图。然后涂抹材料并添加车辆的玻璃部件。我们将在以下指南中介绍这些步骤。 The key factors in preparing a custom vehicle for CARLA lie in rigging the vehicle armature and then importing into the Unreal Engine. After rigging and importing, blueprints need to be set for the car and the wheels. Then apply materials and add the glass parts of the vehicle. We will cover these steps in the following guide.</p><h2 id="建模" tabindex="-1"><a class="header-anchor" href="#建模" aria-hidden="true">#</a> 建模</h2><p>车辆应该有50,000 至 100,000个面。我们建议在导出前对模型进行三角测量，作为最佳实践。CARLA车辆的建模使用实际汽车的尺寸和规模作为参考。请确保您仔细关注3D应用程序的单元。有些以厘米为单位工作，而另一些则以米为单位工作。</p><h3 id="命名规则" tabindex="-1"><a class="header-anchor" href="#命名规则" aria-hidden="true">#</a> 命名规则</h3><p>为了方便和一致，我们建议您将车辆分为以下部分，并相应地命名。特定于玻璃和灯光的详细信息将在后面的部分中介绍：</p><ol><li><strong><code>Bodywork</code></strong>: 车辆的金属部分。这种材料被更改为虚幻引擎材料。可以添加 Logo 和细节，为了可见性，必须使用虚幻引擎编辑器中的alpha通道将它们涂成不同的颜色。</li><li><strong><code>Glass_Ext</code></strong>: 允许从车辆外部到内部可见的玻璃层</li><li><strong><code>Glass_Int</code></strong>: 允许从车辆内部到外部可见的玻璃层</li><li><strong><code>Lights</code></strong>: 大灯、指示灯等</li><li><strong><code>LightGlass_Ext</code></strong>: 允许从光线的外部到内部可见的玻璃层</li><li><strong><code>LightGlass_Int</code></strong>: 允许从光线的内部到外部可见的玻璃层</li><li><strong><code>LicensePlate</code></strong>: 车牌由 29x12 cm 的矩形平面构成。可以使用由 CARLA 提供的 <a href="https://carla-assets.s3.eu-west-3.amazonaws.com/fbx/LicensePlate.rar" target="_blank" rel="noopener noreferrer"><code>.fbx</code></a> 以获得最佳效果。纹理将在虚幻引擎中自动分配。</li><li><strong><code>Interior</code></strong>: 任何其他不符合上述部分的细节都可以进入 <code>Interior</code>。</li></ol><ul><li>材料的命名格式为 <code>M_CarPart_CarName</code> ，例如 <code>M_Bodywork_Mustang</code></li><li>纹理的命名格式为 <code>T_CarPart_CarName</code> ，例如 <code>T_Bodywork_Mustang</code> 。纹理的尺寸为 2048x2048</li></ul><h2 id="使用骨骼绑定车辆-rigging-the-vehicle-using-an-armature" tabindex="-1"><a class="header-anchor" href="#使用骨骼绑定车辆-rigging-the-vehicle-using-an-armature" aria-hidden="true">#</a> 使用骨骼绑定车辆 Rigging the vehicle using an armature</h2><blockquote><p><strong>Rigging</strong>译成中文是索具，应该是角色绑定， <strong>Armature</strong> in blender. <strong>骨架</strong>的基本使用方式</p></blockquote><p>为了在模拟器中显得真实，汽车需要有旋转的车轮，其中前一对车轮可以随着转向输入而转动。因此，为了给CARLA准备一辆车，需要在车上安装一个衔铁，以确定车轮并允许其运动。</p><p>在3D建模应用程序中导入或建模车辆模型网格。在本指南中，我们将使用Blender 3D。确保车轮与主体是可分离的。每个车轮必须作为不同的物体访问。</p><h3 id="导入模型" tabindex="-1"><a class="header-anchor" href="#导入模型" aria-hidden="true">#</a> 导入模型</h3><p>确保车轮与主体是可分离的。</p><p><img src="/assets/ContentAuthoring_Vehicles-Modeling_wheel.9fd6b4ae.png" alt="车轮"> 每个车轮必须作为不同的物体访问，车轮分别命名为： 左前轮 <code>CvL_FrontWheel_L</code> 左后轮 <code>CvL_RearWheel_L</code> 右前轮 <code>CvL_FrontWheel_R</code> 右后轮 <code>CvL_RearWheel_R</code></p><p>重要的是要确保车辆朝向正X方向，因此引擎盖和挡风玻璃应该朝向正X。</p><p>汽车还应定向，使地板到车顶的方向处于正Z方向。</p><p>车轮应该只是在X-Y平面上放牧，原点应该位于您预计车辆的质量中心位于X-Y平面上的位置（虽然不是在Z平面上）。</p><h3 id="添加骨架" tabindex="-1"><a class="header-anchor" href="#添加骨架" aria-hidden="true">#</a> 添加骨架</h3><p>骨架 (Armature) 是角色动画里面最常使用的元素，它可以准确控制一个模型的变形，尤其是很复杂的模型。参考 <a href="https://docs.blender.org/manual/zh-hans/2.79/rigging/armatures/bones/editing/bones.html" target="_blank" rel="noopener noreferrer">Blender 中的骨架</a></p><p>在添加骨架之前，在物体模式下，先将 3D 游标 归位：<code>物体模式</code> ‣ <code>物体</code> ‣ <code>吸附</code> ‣ <code>游标 -&gt; 世界原点</code></p><p>接着，在物体模式下，添加骨架：<code>添加</code> ‣ <code>骨架</code><br><img src="/assets/ContentAuthoring_Vehicles-add_Armature-add.54669a90.png" alt="添加骨架"></p><blockquote><p>这时候的骨架的根应该是居中的，如果骨架的根没有在原点，则需要手动调整。如果骨架很小的，可以进行缩放，按住键盘 <code>s</code>，向四周移动可以等比缩放</p></blockquote><p>切换到编辑模式，并围绕x轴旋转骨架90。 <img src="/assets/ContentAuthoring_Vehicles-add_Armature-rotationX.a442fa43.png" alt="旋转骨架"></p><p>接着，选择骨架，为每一个车轮添加一根骨头，并确保骨头的根与车轮的中心重合。这可以通过在编辑模式下将3D光标定位在每个车轮的中心来实现：</p><ol><li>在 <code>编辑模式</code> 下，使用 <code>Shift-A</code> 快捷键命令添加一个新的骨骼到你的骨架，并重命名</li><li>在 <code>物体模式</code> 下，选择一个轮子，右键 <code>设置原点</code> ‣ <code>原点 -&gt; 几何中心</code></li><li>在 <code>物体模式</code> 下，选择一个轮子，按 <code>Shift+S</code> 或者右键点击 <code>吸附</code> ，选择 <code>游标 -&gt; 选中项</code> 点击，松开后游标移动到车轮中心</li><li>切换至 <code>编辑模式</code> ，选择一个bone，右键点击 <code>吸附</code> ‣ <code>设置原点</code> ‣ <code>选中项 -&gt; 游标</code></li></ol><h3 id="关联父级" tabindex="-1"><a class="header-anchor" href="#关联父级" aria-hidden="true">#</a> 关联父级</h3><p>切换至 <code>物体模式</code>，在项目大纲中，按 <code>shift</code> 多选选定车体和全部4个车轮，按住 <code>ctrl</code> 加选骨架，然后鼠标移动到编辑区域，按下 <code>ctrl+P</code> 或 <code>cmd+P</code> ，点击选择 <code>附带空顶点组</code>，将网格 mesh 绑定至骨架 <code>ctrl+P</code></p><p><img src="https://carla.readthedocs.io/en/latest/img/tuto_content_authoring_vehicles/bind_armature.gif" alt="关联父级"></p><p><img src="/assets/ContentAuthoring_Vehicles-AddParentVertexGroup.2f1d5f63.png" alt="AddParenting"></p><p>已经为网格 mesh 设置父级为骨架 armature 。接下来，需要将每一个轮子分配至对应的骨骼 bone 上。</p><h3 id="给汽车组件指定骨骼" tabindex="-1"><a class="header-anchor" href="#给汽车组件指定骨骼" aria-hidden="true">#</a> 给汽车组件指定骨骼</h3><p><img src="https://carla.readthedocs.io/en/latest/img/tuto_content_authoring_vehicles/assign_vertex_group.gif" alt="分配骨骼"></p><p>在 <code>编辑模式</code> 下，选择每一个部件（车和四个车轮）的顶点组，（鼠标移动至编辑页面）按下 <code>A</code> 选择全部顶点 (vertex) ，选择需要分配的骨骼，点击顶点组面板的 <code>指定</code> 。</p><h3 id="模型导出" tabindex="-1"><a class="header-anchor" href="#模型导出" aria-hidden="true">#</a> 模型导出</h3><p>使用 <a href="https://continuebreak.com/creations/ue4-vehicle-rigging-addon-blender/" target="_blank" rel="noopener noreferrer">UE4 Vehicle Rigging Addon for Blender</a></p><p>选择 <code>文件</code> ‣ <code>导出</code> ‣ <code>FBX (.fbx)</code> 。在 <code>包括</code> 面板的 <code>物体类型</code> 菜单选择，<code>骨架</code> 和 <code>网格</code> ，其他不选择。在 <code>变换</code> 菜单中，修改 <code>前进</code> 为 <code>x 向前</code> ，修改 <code>向上</code> 为 <code>z向上</code> 。在 <code>骨架</code> 菜单中，取消选择 <code>添加骨叶</code>。然后导出。</p><h2 id="导入-ue" tabindex="-1"><a class="header-anchor" href="#导入-ue" aria-hidden="true">#</a> 导入 UE</h2><p>在 carla 目录下 <code>make launch</code> 启动虚幻引擎。打开 <code>内容浏览器</code> ，新建一个文件夹，然后右键，导入资产，选择刚刚从 Blender 里导出的文件，使用默认设置导入</p><p><img src="/assets/ContentAuthoring_Vehicles-importToUE.efc436a2.png" alt="ImportToUE"></p><h3 id="设置物理资源" tabindex="-1"><a class="header-anchor" href="#设置物理资源" aria-hidden="true">#</a> 设置物理资源</h3><p>您现在的内容浏览器目录中将有至少3样东西， <code>骨骼网格体</code> 、 <code>骨骼</code> 和 <code>物理资产</code>，其余的都是材质。双击 <code>物理资产</code>进 行调整。</p><p>首先，选择主体，在右边的 <code>详细</code> 菜单中修改 <code>线性阻尼</code> 为0</p><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考" aria-hidden="true">#</a> 参考</h2><p>https://zhuanlan.zhihu.com/p/384979241 https://continuebreak.com/articles/how-rig-vehicle-blender-28-ue4/</p><p>Rigcar 插件 https://github.com/digicreatures/rigacar</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><svg class="ov-icon" style="font-size:1.08em;" aria-hidden="true" width="17.28" height="17.28" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg><a class="external-link meta-item-label" href="https://github.com/HenryZhuHR/henryzhuhr.github.io/edit/main/docs/software/carla/ContentAuthoring-vehicles.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub"><!--[--><!--]--><!----><span>Edit this page on GitHub</span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></footer><!----><!--[--><div class="pager"><!----><!----></div><!--]--><!----></main><ul class="catalog" style="top:0px;"><li class="level-2 toc-link-建模">建模</li><li class="level-3 toc-link-命名规则">命名规则</li><li class="level-2 toc-link-使用骨骼绑定车辆-rigging-the-vehicle-using-an-armature">使用骨骼绑定车辆 Rigging the vehicle using an armature</li><li class="level-3 toc-link-导入模型">导入模型</li><li class="level-3 toc-link-添加骨架">添加骨架</li><li class="level-3 toc-link-关联父级">关联父级</li><li class="level-3 toc-link-给汽车组件指定骨骼">给汽车组件指定骨骼</li><li class="level-3 toc-link-模型导出">模型导出</li><li class="level-2 toc-link-导入-ue">导入 UE</li><li class="level-3 toc-link-设置物理资源">设置物理资源</li><li class="level-2 toc-link-参考">参考</li></ul></div><!--]--></div><div class="search-page"><span class="search-close"><svg class="ov-icon" style="font-size:1.7999999999999998em;" aria-hidden="true" width="28.799999999999997" height="28.799999999999997" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"/></svg></span><div class="search-box"><input aria-label="Search" value="" placeholder="$ grep ..." autocomplete="off" spellcheck="false"><!----></div></div><div class="menu-btn-container"><div class="menu-btn-wrapper"><div class="menu-btn"><div style="" class="menu-btn-icon"><span></span><span></span><span></span></div><div style="display:none;" class="menu-text">0</div><svg class="menu-progress"><circle class="menu-border" cx="50%" cy="50%" r="48%" style="stroke-dasharray:0% 314.15926%;"></circle></svg></div><div class="menu-btn-child-wrapper"><div class="toggle-dark-button menu-btn-child" title="toggle dark mode"><svg class="ov-icon" style="font-size:1.2em;display:none;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"/></svg><svg class="ov-icon" style="font-size:1.2em;display:none;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 00283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"/></svg><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"/></svg></div><div class="menu-btn-child"><svg class="ov-icon" style="font-size:1.7999999999999998em;" aria-hidden="true" width="28.799999999999997" height="28.799999999999997" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"/></svg></div><div class="menu-btn-child"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"/></svg></div><!----><div class="toggle-sidebar-button menu-btn-child menu-btn-sidebar" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-1.6 -1.6 19.2 19.2" fill="currentColor"><path d="M14 2a1 1 0 011 1v10a1 1 0 01-1 1H2a1 1 0 01-1-1V3a1 1 0 011-1h12zM2 1a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V3a2 2 0 00-2-2H2z"/><path d="M3 4a1 1 0 011-1h2a1 1 0 011 1v8a1 1 0 01-1 1H4a1 1 0 01-1-1V4z"/></svg></div></div></div></div><footer class="footer"><span>
      &copy; <a href="https://github.com/HenryZhuHR" target="_blank">HenryZhuHR</a> 2022-today
      <br>
      Powered by <a href="https://v2.vuepress.vuejs.org" target="_blank">VuePress</a> &
      <a href="https://github.com/Renovamen/vuepress-theme-gungnir" target="_blank">Gungnir</a>
    </span></footer></div><!----><!--]--></div>
    <script type="module" src="/assets/app.351d7b6c.js" defer></script>
  </body>
</html>
