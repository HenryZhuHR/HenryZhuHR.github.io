import{_ as s,c as i,o as a,a2 as t}from"./chunks/framework.bdxXucLJ.js";const e="/assets/grub.Db5UKFSI.png",n="/assets/tweak-change_winButton_1.BZRWGKAV.png",l="/assets/tweak-change_winButton_2.j8PQhVTf.png",h="/assets/tweak-appearance_shell_1.GaIB-QPE.png",p="/assets/tweak-extension-user_themes.CTJLMq9w.png",k="/assets/tweak-appearance_shell_2.RmvnmgXQ.png",r="/assets/tweak-application.EO27TZXJ.png",d="/assets/dash_to_dock-install.CHSsBzKs.png",o="/assets/dash_to_dock-install_button.ev0s0FBZ.png",g="/assets/dash_to_dock-start.DaA1YDhi.png",F="/assets/finalDesktop.PXpCFIG8.png",c="/assets/wsl2-msstore-ubuntu.lBMpVY9M.png",u="/assets/wsl2-windows-terminal.BGastdjD.png",y="/assets/wsl2-login_remote_desktop.wIyP2Ui8.png",D=JSON.parse('{"title":"Ubuntu","description":"","frontmatter":{},"headers":[],"relativePath":"development/linux/ubuntu/ubuntu.md","filePath":"development/linux/ubuntu/ubuntu.md","lastUpdated":1715354557000}'),C={name:"development/linux/ubuntu/ubuntu.md"},b=t(`<h1 id="ubuntu" tabindex="-1">Ubuntu <a class="header-anchor" href="#ubuntu" aria-label="Permalink to &quot;Ubuntu&quot;">​</a></h1><ul><li><a href="#ubuntu">Ubuntu</a><ul><li><a href="#更换软件源">更换软件源</a></li><li><a href="#双系统时间同步">双系统时间同步</a></li><li><a href="#软件安装">软件安装</a><ul><li><a href="#clang">Clang</a></li><li><a href="#microsoft-edge">Microsoft Edge</a></li><li><a href="#github-desktop">GitHub Desktop</a></li><li><a href="#deepin-wine">deepin-wine</a></li><li><a href="#lantern">Lantern</a></li></ul></li><li><a href="#ubuntu-修改-grub-启动项">Ubuntu 修改 Grub 启动项</a></li><li><a href="#界面美化">界面美化</a><ul><li><a href="#tweaktool">TweakTool</a></li><li><a href="#安装-macos-主题样式">安装 MacOS 主题样式</a></li><li><a href="#程序坞修改">程序坞修改</a></li><li><a href="#最终效果">最终效果</a></li></ul></li></ul></li><li><a href="#wsl2-windows-subsystem-for-linux">WSL2 (Windows Subsystem for Linux)</a></li></ul><h2 id="geng-huan-ruan-jian-yuan" tabindex="-1">更换软件源 <a class="header-anchor" href="#geng-huan-ruan-jian-yuan" aria-label="Permalink to &quot;更换软件源&quot;">​</a></h2><p>换源可以参考各自官网的教程：</p><ul><li><a href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/" target="_blank" rel="noreferrer">清华大学源(tuna)</a></li><li><a href="http://mirrors.ustc.edu.cn/help/ubuntu.html" target="_blank" rel="noreferrer">中国科学技术大学源(ustc)</a></li></ul><p>Ubuntu 的软件源配置文件是 <code>/etc/apt/sources.list</code>，将系统自带的该文件做个备份</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/apt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sources.list</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sources.list.bak</span></span></code></pre></div><p>编辑配置文件，并保存</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sources.list</span></span></code></pre></div><blockquote><p>替换的镜像源可以从网站中找到，并且可以在网站上查看到使用帮助</p><ul><li><a href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/" target="_blank" rel="noreferrer">清华大学开源软件镜像站 Ubuntu 镜像使用帮助</a></li><li><a href="http://mirrors.ustc.edu.cn/help/ubuntu.html" target="_blank" rel="noreferrer">中国科学技术大学源</a></li><li><a href="https://developer.aliyun.com/article/751568" target="_blank" rel="noreferrer">阿里源</a></li><li><a href="https://mirrors.huaweicloud.com/home" target="_blank" rel="noreferrer">华为源（包括全部Linux发行版本）</a></li></ul></blockquote><p>例如将 <code>ubuntu 20.04 LTS</code> 的软件源换为 <code>TUNA</code> 源，将文件替换为 <a href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/" target="_blank" rel="noreferrer">清华大学开源软件镜像站 Ubuntu 镜像使用帮助</a> 查询到源列表，即可使用 TUNA 的软件源镜像</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> focal</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restricted</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> universe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> focal-updates</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restricted</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> universe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> multiverse</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> focal-backports</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restricted</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> universe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> multiverse</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> focal-security</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restricted</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> universe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> multiverse</span></span></code></pre></div><p>更新软件源列表并且更新软件</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span></code></pre></div><p>当安装 <code>.deb</code> 软件出问题</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --fix-broken</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><h2 id="shuang-xi-tong-shi-jian-tong-bu" tabindex="-1">双系统时间同步 <a class="header-anchor" href="#shuang-xi-tong-shi-jian-tong-bu" aria-label="Permalink to &quot;双系统时间同步&quot;">​</a></h2><p>当电脑有多个系统的时候可能会存在时间差8小时的情况</p><p>更新软件源</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span></code></pre></div><p>修改系统时间</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">timedatectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-local-rtc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --adjust-system-clock</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ntpdate</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ntpdate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time.windows.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hwclock</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --localtime</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --systohc</span></span></code></pre></div><h2 id="ruan-jian-an-zhuang" tabindex="-1">软件安装 <a class="header-anchor" href="#ruan-jian-an-zhuang" aria-label="Permalink to &quot;软件安装&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tree</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装 GNU 编译器工具和 GDB 调试器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build-essential</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gdb</span></span></code></pre></div><h3 id="clang" tabindex="-1">Clang <a class="header-anchor" href="#clang" aria-label="Permalink to &quot;Clang&quot;">​</a></h3><p>下载 <a href="https://releases.llvm.org/" target="_blank" rel="noreferrer">LLVM 源码</a></p><blockquote><p><a href="https://clang.llvm.org/get_started.html" target="_blank" rel="noreferrer">Getting Started: Building and Running Clang</a></p></blockquote><p>Change directory to where you want the llvm directory placed.</p><p>安装依赖</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cmake</span></span></code></pre></div><p>下载源码</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/llvm/llvm-project.git</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --depth=1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/llvm/llvm-project.git</span></span></code></pre></div><p>编译源码</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> llvm-project</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cmake</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../llvm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -DLLVM_ENABLE_PROJECTS=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;clang;libcxx;libcxxabi&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -DCMAKE_BUILD_TYPE=Release</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -DCMAKE_INSTALL_PREFIX=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/programs/llvm</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -j8</span></span></code></pre></div><ul><li><code>-DLLVM_ENABLE_PROJECTS=&quot;...&quot;</code>: clang, clang-tools-extra, libcxx, libcxxabi, libunwind, lldb, compiler-rt, lld, polly, or debuginfo-tests</li><li><code>-DCMAKE_INSTALL_PREFIX=&lt;install_path&gt;</code> : default=<code>/usr/local</code></li></ul><p>安装</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><h3 id="microsoft-edge" tabindex="-1">Microsoft Edge <a class="header-anchor" href="#microsoft-edge" aria-label="Permalink to &quot;Microsoft Edge&quot;">​</a></h3><p>在 <a href="https://www.microsoftedgeinsider.com/zh-cn/download/?platform=linux" target="_blank" rel="noreferrer">Microsoft Edge Insider Channels</a> 下载 Edge 预览版</p><p>或者可以通过 apt 包管理软件来下载 ：</p><p>添加微软的软件源</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://packages.microsoft.com/keys/microsoft.asc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> gpg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dearmor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> microsoft.gpg</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 644</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> microsoft.gpg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/apt/trusted.gpg.d/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;echo &quot;deb [arch=amd64] https://packages.microsoft.com/repos/edge stable main&quot; &gt; /etc/apt/sources.list.d/microsoft-edge-dev.list&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> microsoft.gpg</span></span></code></pre></div><p>更新软件源并且安装</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> microsoft-edge-dev</span></span></code></pre></div><h3 id="github-desktop" tabindex="-1">GitHub Desktop <a class="header-anchor" href="#github-desktop" aria-label="Permalink to &quot;GitHub Desktop&quot;">​</a></h3><p><a href="https://github.com/shiftkey/desktop" target="_blank" rel="noreferrer">GitHub Desktop - The Linux Fork</a></p><p>添加软件源</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -qO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://packagecloud.io/shiftkey/desktop/gpgkey</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/apt/trusted.gpg.d/shiftkey-desktop.asc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/null</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;echo &quot;deb [arch=amd64] https://packagecloud.io/shiftkey/desktop/any/ any main&quot; &gt; /etc/apt/sources.list.d/packagecloud-shiftky-desktop.list&#39;</span></span></code></pre></div><p>更新软件源并且安装</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github-desktop</span></span></code></pre></div><h3 id="deepin-wine" tabindex="-1">deepin-wine <a class="header-anchor" href="#deepin-wine" aria-label="Permalink to &quot;deepin-wine&quot;">​</a></h3><blockquote><p>参考 <a href="https://github.com/zq1997/deepin-wine" target="_blank" rel="noreferrer">deepin-wine</a> 项目</p></blockquote><p>首次使用时，你需要运行如下一条命令将移植仓库添加到系统中</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -O-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://deepin-wine.i-m.dev/setup.sh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sh</span></span></code></pre></div><blockquote><p>同时尽量将 <code>main</code> <code>restricted</code> <code>universe</code> <code>multiverse</code> 这几个系统源都启用（自行百度），免得依赖问题多</p></blockquote><p>自此以后，你可以像对待普通的软件包一样，使用<code>apt-get</code>系列命令进行各种应用安装、更新和卸载清理了</p><p>将<code>com.qq.weixin.deepin</code>替换为需要安装的包名即可，参考<a href="https://deepin-wine.i-m.dev/" target="_blank" rel="noreferrer">完整的软件列表</a>，例如</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 微信</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.qq.weixin.deepin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># QQ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.qq.im.deepin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TIM</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.qq.office.deepin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># QQ音乐</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.qq.music.deepin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># QQ视频</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.qq.video.deepin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 腾讯会议</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.tencent.meeting.deepin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 爱奇艺</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.iqiyi.deepin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 钉钉</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.dingtalk.deepin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 阿里旺旺</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> com.taobao.wangwang.deepin</span></span></code></pre></div><p>应用图标需要注销重登录后才会出现</p><p>卸载软件</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> purge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --autoremove</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">softwar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>其他问题参考官方的<a href="https://github.com/zq1997/deepin-wine#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98" target="_blank" rel="noreferrer">常见问题</a>以解决</p><h3 id="lantern" tabindex="-1">Lantern <a class="header-anchor" href="#lantern" aria-label="Permalink to &quot;Lantern&quot;">​</a></h3><p>下载<a href="https://github.com/getlantern/download" target="_blank" rel="noreferrer">蓝灯</a>，自行选择是否购买<a href="https://www.getlandeng605.org/" target="_blank" rel="noreferrer">专业版</a></p><h2 id="ubuntu-xiu-gai-grub-qi-dong-xiang" tabindex="-1">Ubuntu 修改 Grub 启动项 <a class="header-anchor" href="#ubuntu-xiu-gai-grub-qi-dong-xiang" aria-label="Permalink to &quot;Ubuntu 修改 Grub 启动项&quot;">​</a></h2><blockquote><p>修改针对多系统的系统启动引导顺序</p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gedit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/default/grub</span></span></code></pre></div><p><img src="`+e+`" alt="修改 grub"></p><ul><li><code>GRUB_DEFAULT</code> : 默认启动项，按列表的顺序，从0开始</li><li><code>GRUB_TIMEOUT</code> : 启动选择超时时间</li></ul><p>修改完成后</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update-grub</span></span></code></pre></div><h2 id="jie-mian-mei-hua" tabindex="-1">界面美化 <a class="header-anchor" href="#jie-mian-mei-hua" aria-label="Permalink to &quot;界面美化&quot;">​</a></h2><p>将 Ubuntu 的桌面包装成 MacOS 的模样，支持 <a href="https://www.apple.com/macos/monterey-preview/" target="_blank" rel="noreferrer"><code>Monterey(TODO)</code></a> /<a href="https://www.apple.com.cn/macos/big-sur/" target="_blank" rel="noreferrer"><code>Bigsur</code></a> /<a href="https://www.apple.com.cn/newsroom/2019/10/macos-catalina-is-available-today/" target="_blank" rel="noreferrer"><code>Catalina</code></a></p><h3 id="tweaktool" tabindex="-1">TweakTool <a class="header-anchor" href="#tweaktool" aria-label="Permalink to &quot;TweakTool&quot;">​</a></h3><p>要安装主题，首先要先安装相应的工具 <code>TweakTool</code></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gnome-tweak-tool</span></span></code></pre></div><p><img src="`+n+'" alt="修改窗口的按钮位置"></p><p><strong>改窗口的按钮位置</strong></p><ul><li>English: <code>Window Titlebars</code> -&gt; <code>Titlebar Buttons</code> -&gt; <code>Placement</code> -&gt; <code>Left</code></li><li>中文: <code>窗口标题栏</code> -&gt; <code>标题栏按钮</code> -&gt; <code>放置</code> -&gt; <code>左</code></li></ul><p><img src="'+l+'" alt="修改窗口的按钮位置"></p><p><strong>修改Shell</strong></p><ul><li>English: <code>Appearance</code> -&gt; <code>Themes</code> -&gt; <code>Shell</code></li><li>中文: <code>外观</code> -&gt; <code>主题</code> -&gt; <code>Shell</code></li></ul><p>发现有感叹号无法操作</p><p><img src="'+h+'" alt="Tweak"></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gnome-shell-extensions</span></span></code></pre></div><p>在<code>扩展</code>中打开<code>User themes</code>的选项之后，就可以看到感叹号消失了，这时候就可以修改<code>Shell</code>了 <img src="'+p+'" alt="extension user_themes"><img src="'+k+'" alt="appearance shell"></p><blockquote><p>如果扩展中没有 <code>User themes</code> 选项，则可能需要<code>reboot</code>重启设备 <code>User themes</code> 选项之后如果感叹号仍然没有消失，那么需要重新打开该软件</p></blockquote><h3 id="an-zhuang-macos-zhu-ti-yang-shi" tabindex="-1">安装 MacOS 主题样式 <a class="header-anchor" href="#an-zhuang-macos-zhu-ti-yang-shi" aria-label="Permalink to &quot;安装 MacOS 主题样式&quot;">​</a></h3><ul><li>MacOS Monterey <ul><li>壁纸</li><li>grub 主题 : <a href="https://www.opendesktop.org/p/1577873/" target="_blank" rel="noreferrer">MacOS Monterey inspired grub theme</a></li></ul></li><li>Big Sur <ul><li><a href="https://www.opendesktop.org/p/1410476/" target="_blank" rel="noreferrer">MacOS-3D-Originals-Gtk</a></li><li><a href="https://www.opendesktop.org/p/1412504/" target="_blank" rel="noreferrer">MacOS-3D-Originals-Icons</a></li><li><a href="https://www.opendesktop.org/p/1408466/" target="_blank" rel="noreferrer">macOS Big Sur:Cursors</a></li><li><a href="https://www.opendesktop.org/p/1410510/" target="_blank" rel="noreferrer">MacOS-3D-Originals-Shell</a></li><li><a href="https://www.opendesktop.org/s/Gnome/p/1102582/" target="_blank" rel="noreferrer">Cupertino iCons CollectionOriginal</a></li></ul></li><li>Catalina <ul><li><a href="https://www.opendesktop.org/s/Gnome/p/1013714/" target="_blank" rel="noreferrer">McHigh Sierra</a></li><li><a href="https://www.opendesktop.org/s/Gnome/p/1241688" target="_blank" rel="noreferrer">McOS-themes</a></li></ul></li></ul><blockquote><p>BigSur主题已经打包到<a href="https://github.com/HenryZhuHR/someTutorials/releases/download/0.0/MacOS-BigSur.tar.gz" target="_blank" rel="noreferrer">Release</a>中，可以直接下载使用</p></blockquote><p>上述下载的文件夹复制到对应的系统文件夹</p><ul><li>主题 (themes) : <code>/usr/share/themes</code></li><li>图标 (icons) : <code>/usr/share/icons</code></li><li>终端 (shell) : <code>/usr/share/themes</code></li><li>背景 (background) : <code>/usr/share/backgrounds</code></li></ul><p>之后就可以修改对应的主题</p><p><img src="'+r+'" alt="Application"></p><h3 id="cheng-xu-wu-xiu-gai" tabindex="-1">程序坞修改 <a class="header-anchor" href="#cheng-xu-wu-xiu-gai" aria-label="Permalink to &quot;程序坞修改&quot;">​</a></h3><p><strong>Dash to Dock</strong>可以把程序坞变成 MacOS 的样子</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chrome-gnome-shell</span></span></code></pre></div><p>点击以下载 <a href="https://extensions.gnome.org/extension/307/dash-to-dock/" target="_blank" rel="noreferrer">dash to dock</a>，并且打开右上角的按钮</p><p><img src="'+d+'" alt="下载 dash to dock"></p><p><img src="'+o+'" alt="打开 dash to dock"></p><p>之后在<code>优化(TWeak)</code>中启动<code>dash to dock</code></p><p><img src="'+g+'" alt="启动 dash to dock"></p><p>点击齿轮按钮，可以修改dock</p><h3 id="zui-zhong-xiao-guo" tabindex="-1">最终效果 <a class="header-anchor" href="#zui-zhong-xiao-guo" aria-label="Permalink to &quot;最终效果&quot;">​</a></h3><p><img src="'+F+'" alt="最终效果"></p><blockquote><p><strong>去掉默认密钥环的密码</strong></p><p>打开应用程序－&gt;附件－&gt;密码和加密密钥（如果你的没有，在终端中输入 seahorse），切换到密码选项卡，会看到一个密码密钥环（我的密钥环是 login）， 右击－&gt;更改密码，然后在“旧密码”中填入系统登录密码，其他不用填，直接确定，并选择“使用不安全的存储器”，这样就可以去掉默认密钥环的密码了。</p></blockquote><h1 id="wsl2-windows-subsystem-for-linux" tabindex="-1">WSL2 (Windows Subsystem for Linux) <a class="header-anchor" href="#wsl2-windows-subsystem-for-linux" aria-label="Permalink to &quot;WSL2 (Windows Subsystem for Linux)&quot;">​</a></h1><p>参考官方的 <a href="https://docs.microsoft.com/zh-cn/windows/wsl/" target="_blank" rel="noreferrer">适用于 Linux 的 Windows 子系统文档</a> 安装 WSL2 (Windows Subsystem for Linux)组件</p><p>安装完成后，</p><p>到 <code>Microsoft Store</code> 中下载需要的Linux发行版本，这里选择<a href="https://www.microsoft.com/store/productId/9NBLGGH4MSV6" target="_blank" rel="noreferrer">Ubuntu</a></p><p><img src="'+c+'" alt="Microsoft Store"></p><p>打开 PowerShell，然后在安装新的 Linux 发行版时运行以下命令，将 WSL 2 设置为默认版本</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wsl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --set-default-version</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span></code></pre></div><p>检查分配给每个已安装的 Linux 分发版的 WSL 版本</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wsl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --verbose</span></span></code></pre></div><p>启动 Ubuntu 之后进行短暂的安装</p><blockquote><p>推荐<a href="https://www.microsoft.com/store/productId/9N0DX20HK701" target="_blank" rel="noreferrer">Windows Terminal</a>，Windows Terminal 可以用于启动Ubuntu <img src="'+u+`" alt="Windows Terminal"></p></blockquote><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>安装后你只能得到命令行的 Ubuntu，但可以通过自行装上 Gnome 桌面，如果不需要图形用户界面可以跳过以下全部部分</p></div><p>WSL 不支持 systemd 而 Gnome 桌面又是基于 systemd，所以先解决这个问题。（参考：ubuntu-wsl2-systemd-script 的解决方案）</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Github</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --depth</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/HenryZhuHR/ubuntu-wsl2-systemd-script.git</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Gitee</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --depth</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://gitee.com/HenryZhuHR/ubuntu-wsl2-systemd-script</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ubuntu-wsl2-systemd-script</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ubuntu-wsl2-systemd-script.sh</span></span></code></pre></div><p>重新启动子系统，或者重启电脑也行。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ubuntu-desktop</span></span></code></pre></div><blockquote><p>安装过程很漫长</p></blockquote><p>安装 Xrdp</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xrdp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xrdp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> adduser</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xrdp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssl-cert</span></span></code></pre></div><p><strong>每次启动前运行的命令</strong>！</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xrdp</span></span></code></pre></div><p>查看一下配置文件中的端口（默认：3389）</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/xrdp/xrdp.ini</span></span></code></pre></div><p>配置防火墙</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ufw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3389</span></span></code></pre></div><p>登录远程桌面</p><p><img src="`+y+`" alt="登录远程桌面"></p><ul><li><strong>SSH 远程连接</strong></li></ul><p>重装原有SSH</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openssh-server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openssh-server</span></span></code></pre></div><blockquote><p>先解释一下WSL的网络，作为子系统的Ubuntu Linux和Windows主系统的IP是一样的。如果在Linux上搭建了Nginx服务器，那么在Windows上的浏览器上输入localhost是可以访问Nginx服务的。如果在Linux上运行netstat -nlp是不会看到任何端口服务的。在Linux上启用端口服务的时候，Windows系统会弹出窗口，询问是否允许相关端口访问。</p></blockquote><p>WSL上的Ubuntu默认安装了openssh-server，也就是ssh服务的软件。但是，这个软件的配置是不完整的，如果启用服务，会报缺失几个密钥文件。为了解决这个问题，我们需要重新安装openssh-server：</p><p>重新安装完还不行，因为WSL上的Ubuntu的SSH服务配置默认不允许密码方式登录，我们需要改配置： 更改配置文件</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/ssh/sshd_config</span></span></code></pre></div><p>将以下配置复制到sshd_config配置文件</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2222</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   #设置ssh的端口号, 由于22在windows中有别的用处, 尽量不修改系统的端口号</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PermitRootLogin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yes</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # 可以root远程登录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PasswordAuthentication</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yes</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 允许密码验证登录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AllowUsers</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ubutnu</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # 远程登录时的用户名</span></span></code></pre></div><p>重启sshd服务</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --full-restart</span></span></code></pre></div><p>此时，我们可以在Ubuntu的Bash下连接自己测试，也可以用Windows的PowerShell连接Ubuntu来测试，命令都是一样的</p><p>测试连接</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> username@localhost:2222</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 	# username为安装WSL Ubuntu时输入的用户名</span></span></code></pre></div><p>如果要在其它机器上访问，需要查找本机IP，把localhost换成IP，那么同一子网（wifi、路由器）下的机器也可访问Ubuntu里的服务。 如果在其他机器上连接不成功看是不是Win10本地防火墙的2222端口没有放行，放行端口方法</p><ul><li>防火墙-&gt;高级设置-&gt;入站规则-&gt;新建规则</li><li>端口-&gt;下一步</li><li>选择tcp 特定本地端口 2222</li><li>允许连接, 默认都选上, 下一步填个名字 完成</li></ul>`,149),B=[b];function m(v,E,f,w,_,q){return a(),i("div",null,B)}const A=s(C,[["render",m]]);export{D as __pageData,A as default};
